# 잔디밴드 백엔드 테스트 목차

본 문서는 `jandi_band_backend` 프로젝트의 테스트 케이스를 `@DisplayName` 기준으로 정리한 목차입니다.

## 1. Auth (인증) 테스트

### AuthCancelServiceTest - AuthService 회원탈퇴 테스트
1. 정상 케이스 - 일반 회원의 정상 탈퇴
2. 예외 케이스
   - 2-1. 존재하지 않는 사용자 ID로 탈퇴 시도
   - 2-2. 이미 탈퇴한 사용자가 다시 탈퇴 시도
3. 대표자 탈퇴 케이스
   - 3-1. 단일 동아리 대표자가 탈퇴 시도
   - 3-2. 다중 동아리 대표자가 탈퇴 시도
4. 시스템 오류 케이스
   - 4-1. 그룹 1 소프트 삭제 중 오류 발생
   - 4-2. 그룹 2 익명화 처리 중 오류 발생
   - 4-3. 그룹 3 하드 삭제 중 오류 발생
5. 카카오 연동 해제 케이스
   - 5-1. 카카오 연결 해제 실패 시 롤백
   - 5-2. 유효하지 않은 카카오 OAuth ID로 연결 해제 시도
6. 특수 케이스
   - 6-1. 데이터가 없는 사용자 탈퇴
7. 대용량 데이터 케이스
   - 7-1. 프로모션 좋아요 데이터가 많은 사용자 탈퇴
8. 유효성 검증 케이스
   - 8-1. Null 사용자 ID로 탈퇴 시도
   - 8-2. 유효하지 않은 사용자 ID로 탈퇴 시도 (0 이하)

## 2. Invite (초대) 테스트

### JoinClubServiceTest - JoinService 동아리 가입 테스트
1. 정상 가입 케이스
   - 1-1. 신규 사용자의 동아리 정상 가입
   - 1-2. 소프트 삭제된 사용자의 동아리 재가입 (재활성화)
2. 예외 케이스
   - 2-1. 존재하지 않는 사용자 ID로 가입 시도
   - 2-2. 유효하지 않은 초대 코드로 가입 시도
   - 2-3. 이미 활성화된 멤버가 재가입 시도
   - 2-4. 강퇴된 사용자가 재가입 시도
   - 2-5. 강퇴된 상태에서 소프트 삭제도 된 사용자가 재가입 시도
   - 2-6. Null 초대 코드로 가입 시도
   - 2-7. 빈 문자열 초대 코드로 가입 시도
   - 2-8. 공백문자만 포함된 초대 코드로 가입 시도
   - 2-9. 유효하지 않은 사용자 ID로 가입 시도 (0)
   - 2-10. 음수 사용자 ID로 가입 시도
3. 시스템 오류 케이스
   - 3-1. 데이터베이스 오류 발생 시
   - 3-2. InviteUtilService에서 클럽 조회 실패
4. 상태 일관성 케이스
   - 4-1. 활성화된 멤버에서 재활성화 시도 (deletedAt이 null인 경우)

### JoinTeamServiceTest - JoinService 팀 가입 테스트
1. 정상 가입 케이스
   - 1-1. 동아리 멤버가 팀에 정상 가입
   - 1-2. 동아리 미가입자가 팀 가입 시 동아리 + 팀 동시 가입
   - 1-3. 소프트 삭제된 팀 멤버가 팀에 재가입 (재활성화)
   - 1-4. 동아리 탈퇴 + 팀 탈퇴 상태에서 팀 재가입 시 동아리 + 팀 동시 재활성화
2. 예외 케이스
   - 2-1. 존재하지 않는 사용자 ID로 가입 시도
   - 2-2. 유효하지 않은 초대 코드로 가입 시도
   - 2-3. 이미 활성화된 팀 멤버가 재가입 시도
   - 2-4. 동아리에서 강퇴된 사용자가 팀 가입 시도
   - 2-5. 동아리 강퇴 + 팀 탈퇴 상태에서 팀 가입 시도
   - 2-6. Null 초대 코드로 팀 가입 시도
   - 2-7. 빈 문자열 초대 코드로 팀 가입 시도
   - 2-8. 유효하지 않은 사용자 ID로 팀 가입 시도 (0 이하)
   - 2-9. 음수 사용자 ID로 팀 가입 시도
   - 2-10. 상태 일관성 검증 - 동아리와 팀 멤버십 상태 확인
   - 2-11. 활성화된 팀 멤버에서 재활성화 시도 (deletedAt이 null인 경우)
   - 2-12. 동아리 활성 멤버 + 팀 신규 가입
3. 시스템 오류 케이스
   - 3-1. 데이터베이스 오류 발생 시 (팀 멤버 조회 실패)
   - 3-2. InviteUtilService에서 팀 조회 실패

## 3. Poll (투표) 테스트

### PollCreationServiceTest - PollService 투표 생성/관리 테스트
1. 정상 케이스 - 투표 생성 성공
2. 존재하지 않는 클럽ID로 투표 생성
3. null 클럽ID로 투표 생성
4. null 또는 빈 제목으로 투표 생성
5. null 마감시간으로 투표 생성
6. null 사용자ID로 투표 생성
7. 존재하지 않는 사용자로 투표 생성
8. 클럽 정보가 null인 상태에서 DTO 변환
9. 사용자 정보가 null인 상태에서 DTO 변환
10. Repository 저장 중 예외 발생

### PollSongServiceTest - PollService 곡 추가 관리 테스트
11. 정상 케이스 - 투표에 곡 추가 성공
12. 존재하지 않는 투표에 곡 추가 시도
13. 이미 마감된 투표에 곡 추가 시도
14. null 또는 빈 곡명으로 곡 추가
15. null 또는 빈 아티스트명으로 곡 추가
16. 존재하지 않는 사용자로 곡 추가 시도
17. 삭제된 투표에 곡 추가 시도
18. 프로필 사진이 없는 사용자의 곡 추가
19. Repository 저장 중 예외 발생
20. 투표 정보가 null인 상태에서 DTO 변환
21. 유효하지 않은 YouTube URL로 곡 추가

### PollVotingServiceTest - PollService 투표 참여 테스트
22. 정상 케이스 - 곡에 투표 성공
23. 동일한 타입으로 재투표 시도
24. 다른 타입으로 투표 변경 성공
25. 마감된 투표에 투표 시도
26. 존재하지 않는 투표 곡에 투표
27. 존재하지 않는 투표에 투표 시도
28. 유효하지 않은 투표 타입으로 투표
29. null 또는 빈 투표 타입으로 투표
30. 존재하지 않는 사용자로 투표 시도
31. 투표와 곡이 매칭되지 않을 때 투표 시도
32. 한국어 투표 타입으로 투표
33. Repository 저장 중 예외 발생
34. 대소문자 구분 없는 투표 타입 처리

### PollVoteCancelServiceTest - PollService 투표 취소 테스트
35. 정상 케이스 - 투표 취소 성공
36. 투표하지 않은 항목의 투표 취소 시도
37. 존재하지 않는 투표 곡의 투표 취소
38. 다른 타입의 투표를 취소 시도
39. 존재하지 않는 사용자의 투표 취소
40. 유효하지 않은 투표 타입으로 취소
41. null 투표 타입으로 취소
42. 한국어 투표 타입으로 취소
43. 대소문자 구분 없는 투표 타입으로 취소
44. Repository 삭제 중 예외 발생
45. 프로필 사진이 없는 사용자의 투표 취소
46. 마감된 투표의 투표 취소

### PollQueryServiceTest - PollService 조회 관련 테스트
47. 정상 케이스 - 클럽별 투표 목록 조회 성공
48. 존재하지 않는 클럽의 투표 목록 조회
49. 빈 투표 목록 조회
50. 정상 케이스 - 투표 상세 조회 성공
51. 존재하지 않는 투표 상세 조회
52. 삭제된 투표 상세 조회
53. 투표 상세 조회 - 곡이 없는 경우
54. 투표 상세 조회 - 클럽 정보가 null인 경우
55. 투표 상세 조회 - 생성자 정보가 null인 경우
56. Repository 조회 중 예외 발생
57. 투표 상세 조회 - Repository 조회 중 예외 발생
58. null currentUserId로 투표 상세 조회

### PollSortingServiceTest - PollService 정렬 및 계산 로직 테스트
59. 정상 케이스 - LIKE 수 기준 내림차순 정렬
60. LIKE 수 기준 오름차순 정렬
61. DISLIKE 수 기준 내림차순 정렬
62. SCORE 기준 내림차순 정렬
63. SCORE 기준 오름차순 정렬
64. 유효하지 않은 정렬 기준
65. null 정렬 기준
66. 빈 곡 목록에 대한 정렬 적용
67. 모든 투표 수가 0인 곡들의 정렬
68. 동점 곡들의 정렬 순서
69. 음수 점수를 가진 곡들의 정렬
70. 대소문자 구분 없는 정렬 기준 처리
71. 대소문자 구분 없는 정렬 순서 처리
72. 기본 정렬 순서 (desc) 확인

## 4. Team (팀) 테스트

### TeamTimetableServiceTest1 - TeamTimetableService 스케줄 조율 및 등록 테스트
1. 스케줄 조율 제안 테스트
   - 1-1. 팀원이 스케줄 조율 제안 정상 시작
   - 1-2. 존재하지 않는 팀에 대한 스케줄 조율 제안 시 예외 발생
   - 1-3. 팀원이 아닌 사용자의 스케줄 조율 제안 시 예외 발생
2. 시간표 등록 테스트
   - 2-1. 본인의 개인 시간표를 팀 시간표로 정상 등록
   - 2-2. 시간표 ID 누락 시 예외 발생
   - 2-3. 존재하지 않는 시간표 등록 시 예외 발생

### TeamTimetableServiceTest2 - TeamTimetableService 수정 및 검증 테스트
3. 시간표 수정 테스트
   - 3-1. 팀원이 자신의 팀 시간표 정상 수정
   - 3-2. 팀원이 아닌 사용자의 수정 시도 시 예외 발생
   - 3-3. JSON 변환 오류 발생 시 예외 발생
   - 3-4. 시간표 업데이트 시간이 올바르게 설정되는지 확인

## 5. User (사용자) 테스트

### UserTimetableServiceTest1 - UserTimetableService 조회 테스트
1. 시간표 목록 조회 테스트
   - 1-1. 내 시간표 목록 정상 조회
   - 1-2. 시간표가 없는 사용자의 빈 목록 조회
   - 1-3. 삭제된 시간표 제외하고 조회
2. 시간표 상세 조회 테스트
   - 2-1. 본인의 시간표 정상 조회
   - 2-2. 존재하지 않는 시간표 조회 시 예외 발생
   - 2-3. 권한 없는 시간표 접근 시 예외 발생
   - 2-4. ADMIN 권한으로 모든 시간표 조회 가능
   - 2-5. 삭제된 시간표 접근 시 예외 발생

### UserTimetableServiceTest2 - UserTimetableService 생성/수정/삭제 테스트
3. 시간표 생성 테스트
   - 3-1. 유효한 시간표 데이터로 정상 생성
   - 3-2. 시간표 이름 누락 시 예외 발생
   - 3-3. 시간표 이름이 null인 경우 예외 발생
   - 3-4. 시간표 형식 오류 - 요일 누락
   - 3-5. 시간표 형식 오류 - 잘못된 시간 형식
   - 3-6. 시간표 형식 오류 - 30분 단위가 아닌 시간
4. 시간표 수정 테스트
   - 4-1. 본인의 시간표 정상 수정
   - 4-2. 권한 없는 시간표 수정 시도 시 예외 발생
   - 4-3. ADMIN 권한으로 모든 시간표 수정 가능
   - 4-4. 존재하지 않는 시간표 수정 시 예외 발생
5. 시간표 삭제 테스트
   - 5-1. 본인의 시간표 정상 삭제
   - 5-2. 권한 없는 시간표 삭제 시도 시 예외 발생
   - 5-3. ADMIN 권한으로 모든 시간표 삭제 가능
   - 5-4. 이미 삭제된 시간표 삭제 시도 시 예외 발생

## 6. 애플리케이션 테스트

### JandiBandBackendApplicationTests
- contextLoads (기본 애플리케이션 컨텍스트 로딩 테스트)

---

**총 테스트 케이스 수:** 총 152개의 테스트
**커버리지 영역:** 회원 탈퇴, 동아리/팀 가입, 곡 투표, 시간표
**테스트 유형:** 단위 테스트 (서비스 로직)
